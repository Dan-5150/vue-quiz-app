import{d as F,k as N,i as p,y as q,j as z,a as n,f,w as u,b as c,q as M,o,e as t,m as S,v as Q,n as T,c as k,F as b,g,A as D,r as I,h as L,t as j,_ as E}from"./index-DXzsqR7n.js";import{u as G,S as d}from"./quiz-B4Rdr_mA.js";import"./questions-Bzw07epI.js";const R={class:"form-control age-input"},$=["value"],H={class:"form-control"},J=["value"],K={class:"form-control"},P=F({__name:"NewUserForm",setup(W){const r=G(),V=L(),s=N({value:"",isValid:!0}),w=p([{name:"Defined Order",value:d.definedOrder},{name:"Alphabetical Order",value:d.alphabeticalOrder},{name:"Question Type Order",value:d.questionTypeOrder}]),i=p(d.definedOrder),m=p(!1),y=q(()=>r.user);z(()=>{_()});const _=()=>{r.clearUserInfo()},O=()=>{s.value===""&&(s.isValid=!1)},x=async()=>{if(O(),!!s.isValid){m.value=!0;try{await r.fetchUserAge({name:s.value})}catch(l){console.error(l.message||"Something went wrong!")}m.value=!1}},U=l=>{l.value&&(l.isValid=!0)},A=()=>{O(),r.updateSortOrder(i.value),r.sortQuestions(i.value),V.replace("/quiz-setup")};return(l,e)=>{const C=c("base-loading-spinner"),v=c("base-button"),B=c("base-card");return o(),n("form",{onSubmit:M(A,["prevent"])},[f(B,{classes:"card-sm text-left"},{default:u(()=>[e[9]||(e[9]=t("h2",null,"User Info",-1)),t("div",{class:T(["form-control",{invalid:!s.isValid}])},[e[3]||(e[3]=t("label",{for:"name"},"Name",-1)),S(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),type:"text",onBlur:e[1]||(e[1]=a=>U(s))},null,544),[[Q,s.value,void 0,{trim:!0}]])],2),t("div",R,[e[6]||(e[6]=t("label",{for:"name"},"Age",-1)),m.value?(o(),k(C,{key:0})):(o(),n(b,{key:1},[y.value.age?(o(),n(b,{key:0},[t("input",{id:"name",value:y.value.age,type:"text",disabled:""},null,8,$),f(v,{type:"button",classes:"small red",onClick:_},{default:u(()=>[...e[4]||(e[4]=[g(" Clear ",-1)])]),_:1})],64)):(o(),k(v,{key:1,type:"button",classes:"small",onClick:x},{default:u(()=>[...e[5]||(e[5]=[g(" Get Age ",-1)])]),_:1}))],64))]),t("div",H,[e[7]||(e[7]=t("label",{for:"sort-order"},"Question Sort Order",-1)),S(t("select",{id:"sort-order","onUpdate:modelValue":e[2]||(e[2]=a=>i.value=a),name:"sort-order"},[(o(!0),n(b,null,I(w.value,a=>(o(),n("option",{key:a.value,value:a.value},j(a.name),9,J))),128))],512),[[D,i.value]])]),t("div",K,[f(v,{type:"submit"},{default:u(()=>[...e[8]||(e[8]=[g(" Submit ",-1)])]),_:1})])]),_:1})],32)}}}),h=E(P,[["__scopeId","data-v-fa1d1e18"]]);export{h as default};
