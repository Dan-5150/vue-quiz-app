import{d as z,p as b,k as D,l as I,a as c,o as p,e as t,q as T,s as y,v as g,n as x,u as w,x as $,f as k,b as O,w as Q,g as A,F as R,r as j,t as h,y as E,z as L,_ as Y}from"./index-C2nhEgQH.js";import{Q as d}from"./QuestionType-B2p6nuUK.js";var f=(n=>(n.new="new",n.edit="edit",n))(f||{});const G={key:2,class:"form-control text-center"},H={key:0,class:"invalid"},J={key:1,class:"invalid"},K={class:"form-control"},P=["for"],W=["id","onUpdate:modelValue"],X={class:"form-control"},Z=["id","onUpdate:modelValue"],_=["for"],ee={class:"form-control"},te=z({__name:"QuestionForm",props:{processType:{type:String,required:!0},editQuestion:{type:Object,required:!1,default(){return{question:"",questionType:null,choices:[],answer:""}}}},emits:["question-form"],setup(n,{emit:F}){const u=n,B=F,r=b({value:"",isValid:!0}),s=b({value:"",isValid:!0}),a=b({value:"",isValid:!0}),o=b({values:[],isValid:!0,singleCorrect:!0}),v=D(!0);I(()=>{u.processType===f.edit&&(r.value=u.editQuestion.question,u.editQuestion.questionType===d.multipleChoice?(o.values=[...u.editQuestion.choices],s.value=d.multipleChoice):(a.value=u.editQuestion.answer,s.value=d.text))});const U=()=>{v.value=!0;let i=0;r.value===""&&(r.isValid=!1,v.value=!1),s.value===""&&u.processType===f.new&&(s.isValid=!1,v.value=!1),a.value===""&&s.value===d.text&&(a.isValid=!1,v.value=!1),o.values.length===0&&s.value===d.multipleChoice&&(o.isValid=!1,v.value=!1);for(const e of o.values)e.correct&&i++,e.answer===""&&(o.isValid=!1,v.value=!1);o.values.length>0&&i!==1&&(o.singleCorrect=!1,v.value=!1)},q=i=>{i.value&&(i.isValid=!0)},M=()=>{if(U(),!!v.value){if(u.processType===f.new){const i={question:r.value,questionType:s.value,answer:a.value,choices:o.values};B("question-form",i)}else if(u.processType===f.edit){const i={question:r.value,questionType:u.editQuestion.questionType,answer:a.value,choices:o.values};B("question-form",i)}}},N=()=>{const i={answer:"",correct:!1};o.values.push(i)},S=i=>{o.values.splice(i,1)};return(i,e)=>{const V=O("base-button");return p(),c("form",{onSubmit:E(M,["prevent"])},[t("div",{class:x(["form-control",{invalid:!r.isValid}])},[e[8]||(e[8]=t("label",{for:"question"},"Question",-1)),y(t("input",{id:"question","onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),type:"text",onBlur:e[1]||(e[1]=l=>q(r))},null,544),[[g,r.value,void 0,{trim:!0}]])],2),n.processType===w(f).new?(p(),c("div",{key:0,class:x(["form-control flex",{invalid:!s.isValid}])},[t("div",null,[y(t("input",{id:"multipleChoice","onUpdate:modelValue":e[2]||(e[2]=l=>s.value=l),type:"radio",name:"questionType",value:"multipleChoice",onBlur:e[3]||(e[3]=l=>q(s))},null,544),[[$,s.value,void 0,{trim:!0}]]),e[9]||(e[9]=t("label",{for:"multipleChoice"},"Multiple Choice",-1))]),t("div",null,[y(t("input",{id:"textAnswer","onUpdate:modelValue":e[4]||(e[4]=l=>s.value=l),type:"radio",name:"questionType",value:"text",onBlur:e[5]||(e[5]=l=>q(s))},null,544),[[$,s.value,void 0,{trim:!0}]]),e[10]||(e[10]=t("label",{for:"textAnswer"},"Text Answer",-1))])],2)):T("",!0),s.value===w(d).text||n.editQuestion.questionType===w(d).text?(p(),c("div",{key:1,class:x(["form-control",{invalid:!a.isValid}])},[e[11]||(e[11]=t("label",{for:"text-answer"},"Answer",-1)),y(t("textarea",{id:"text-answer","onUpdate:modelValue":e[6]||(e[6]=l=>a.value=l),rows:"4",onBlur:e[7]||(e[7]=l=>q(a))},null,544),[[g,a.value,void 0,{trim:!0}]])],2)):s.value===w(d).multipleChoice||n.editQuestion.questionType===w(d).multipleChoice?(p(),c("div",G,[k(V,{type:"button",classes:"small",onClick:N},{default:Q(()=>[...e[12]||(e[12]=[A(" Add New Choice ",-1)])]),_:1}),o.isValid?T("",!0):(p(),c("p",H," One or more of your choices are invalid. ")),o.singleCorrect?T("",!0):(p(),c("p",J," Your question must have only 1 correct answer. "))])):T("",!0),(p(!0),c(R,null,j(o.values,(l,m)=>(p(),c("div",{key:m,class:x(["choice",{invalid:!o.isValid||!o.singleCorrect}])},[t("div",K,[t("label",{for:`question-${m}`},h(m+1)+". Answer",9,P),y(t("input",{id:`question-${m}`,"onUpdate:modelValue":C=>l.answer=C,type:"text"},null,8,W),[[g,l.answer]]),k(V,{type:"button",classes:"small red",onClick:C=>S(m)},{default:Q(()=>[...e[13]||(e[13]=[A(" Remove ",-1)])]),_:2},1032,["onClick"])]),t("div",X,[y(t("input",{id:`correctAnswer-${m}`,"onUpdate:modelValue":C=>l.correct=C,type:"checkbox",value:"correctAnswer"},null,8,Z),[[L,l.correct]]),t("label",{for:`correctAnswer-${m}`},"Correct Answer?",8,_)])],2))),128)),t("div",ee,[k(V,{type:"submit"},{default:Q(()=>[...e[14]||(e[14]=[A(" Submit ",-1)])]),_:1}),k(V,{type:"button",classes:"outline",link:!0,to:"/questions"},{default:Q(()=>[A(h(n.processType===w(f).edit?"Back":"Close"),1)]),_:1})])],32)}}}),le=Y(te,[["__scopeId","data-v-c93d04c1"]]);export{f as P,le as Q};
